'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_long=require('long'),_long2=_interopRequireDefault(_long);Object.defineProperty(exports,'__esModule',{value:!0});function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var LibRandom=function(){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Date.now();_classCallCheck(this,a),this.seed=b,this.pcgIncrement=_long2.default.fromInt(1,!0),this.pcgMultiplier=_long2.default.fromString('6364136223846793005',!0),this.pcgState=_long2.default.fromInt(this.seed,!0),this.max32Bit=4294967296,this.storedGaussian=[]}var b=Math.sqrt,c=Math.log;return _createClass(a,[{key:'_many',value:function _many(a,b){for(var c=[],d=0;d<a;d++)c.push(b());return c}},{key:'_nextState',value:function _nextState(){this.pcgState=this.pcgState.multiply(this.pcgMultiplier).add(this.pcgIncrement)}},{key:'_pcg',value:function _pcg(){return this._nextState(),this.pcgState.shiftRightUnsigned(29-this.pcgState.shiftRightUnsigned(61).toInt()).toInt()}},{key:'_pcgFloat',value:function _pcgFloat(){return this._pcg()/this.max32Bit}},{key:'_boxMuller',value:function _boxMuller(){var a=this.rand(-1,1),d=this.rand(-1,1),e=a*a+d*d;if(1<=e||0==e)return this._boxMuller();var f=b(-2*c(e)/e);return this.storedGaussian.push(d*f),a*f}},{key:'rand',value:function rand(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return c+(a-c)*this._pcgFloat()}},{key:'randInt',value:function randInt(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.max32Bit-1;return c+this._pcg()%(a+1-c)}},{key:'randNormal',value:function randNormal(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,d=1===this.storedGaussian.length?this.storedGaussian.pop():this._boxMuller();return d*b(c)+a}},{key:'randIntNormal',value:function randIntNormal(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return Math.floor(0.5+this.randNormal(a,b))}},{key:'randExponential',value:function randExponential(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return-c(1-this.rand())/a}},{key:'manyRand',value:function manyRand(c){var d=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return this._many(c,function(){return d.rand(e,a)})}},{key:'manyRandInt',value:function manyRandInt(c){var d=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.max32Bit-1;return this._many(c,function(){return d.randInt(e,a)})}},{key:'manyRandNormal',value:function manyRandNormal(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return this._many(a,function(){return b.randNormal(c,d)})}},{key:'manyRandIntNormal',value:function manyRandIntNormal(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return this._many(a,function(){return b.randIntNormal(c,d)})}},{key:'manyRandExponential',value:function manyRandExponential(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._many(a,function(){return b.randExponential(c)})}},{key:'choose',value:function choose(a){return a[this.randInt(0,a.length-1)]}},{key:'chooseMany',value:function chooseMany(a,b){var c=2<arguments.length&&void 0!==arguments[2]&&arguments[2],d=[].concat(_toConsumableArray(a));if(0>b||b>a.length&&!c)throw new Error('Invalid parameter set');for(var e,f=[],g=0;g<b;g++)e=this.randInt(0,d.length-1),f.push(d[e]),c||d.splice(e,1);return f}},{key:'shuffle',value:function shuffle(a){return this.chooseMany(a,a.length)}},{key:'_getColor',value:function _getColor(){return('0'+this.randInt(0,255).toString(16)).slice(-2)}},{key:'colorCode',value:function colorCode(){return'#'+this._getColor()+this._getColor()+this._getColor()}}]),a}();exports.default=LibRandom;
